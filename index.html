<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Garden Tracker</title>
  <meta name="theme-color" content="#0b3d2e" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="title">
      <h1>Garden Tracker</h1>
      <div id="subtitle" class="subtitle">Loading…</div>
    </div>

    <nav class="tabs" role="tablist" aria-label="Sections">
      <button class="tab active" data-tab="today" role="tab" aria-selected="true">Today</button>
      <button class="tab" data-tab="plants" role="tab" aria-selected="false">Plants</button>
      <button class="tab" data-tab="upcoming" role="tab" aria-selected="false">Upcoming</button>
      <button class="tab" data-tab="calendar" role="tab" aria-selected="false">Calendar</button>
      <button class="tab" data-tab="settings" role="tab" aria-selected="false">Settings</button>
    </nav>
  </header>

  <main class="container">
    <section id="tab-today" class="tab-panel active" role="tabpanel">
      <div class="card">
        <div class="card-header">
          <h2>Weather & Irrigation</h2>
          <div class="actions">
            <button id="btn-weather" class="btn secondary">Get local weather</button>
          </div>
        </div>
        <div id="weather" class="muted">Weather is optional. Tap “Get local weather” to use your phone’s location.</div>
      </div>

      <div class="card">
        <div class="card-header">
          <h2>Tasks due now</h2>
          <div class="actions">
            <label class="toggle">
              <input id="toggle-hide-complete" type="checkbox" checked />
              <span>Hide completed</span>
            </label>
          </div>
        </div>
        <div id="today-tasks" class="list"></div>
      </div>
    </section>

    <section id="tab-plants" class="tab-panel" role="tabpanel">
      <div class="split">
        <div class="card">
          <div class="card-header">
            <h2>Plants</h2>
            <div class="actions">
              <input id="plant-search" class="input" placeholder="Search…" />
            </div>
          </div>
          <div id="plants-list" class="list"></div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2 id="plant-title">Select a plant</h2>
            <div class="actions">
              <button id="btn-expand-all" class="btn secondary" disabled>Expand</button>
              <button id="btn-collapse-all" class="btn secondary" disabled>Collapse</button>
            </div>
          </div>
          <div id="plant-detail" class="muted">Pick a plant on the left.</div>
        </div>
      </div>
    </section>

    <section id="tab-upcoming" class="tab-panel" role="tabpanel">
      <div class="card">
        <div class="card-header">
          <h2>Upcoming tasks</h2>
          <div class="muted" style="margin-top:6px">A detailed list view. Use the Calendar tab for the month-by-month overview.</div>
          <div class="actions">
            <select id="upcoming-window" class="input">
              <option value="14">Next 14 days</option>
              <option value="30" selected>Next 30 days</option>
              <option value="60">Next 60 days</option>
              <option value="120">Next 120 days</option>
            </select>
            <label class="toggle">
              <input id="toggle-upcoming-hide-complete" type="checkbox" checked />
              <span>Hide completed</span>
            </label>
          </div>
        </div>
        <div id="upcoming-tasks" class="list"></div>
      </div>
    </section>

    
    <section id="tab-calendar" class="tab-panel" role="tabpanel">
      <div class="card">
        <div class="card-header">
          <h2>Calendar</h2>
          <div class="actions">
            <select id="cal-year" class="select"></select>
          </div>
        </div>
        <div class="muted">Half-month overview of planting stages. Expand tasks in Today/Upcoming for detailed instructions.</div>
        <div id="calendar-legend" class="legend"></div>
        <div id="calendar-grid" style="margin-top:12px; overflow:auto"></div>
      </div>
    </section>


    <section id="tab-settings" class="tab-panel" role="tabpanel">
      <div class="card">
        <div class="card-header">
          <h2>Data & Preferences</h2>
        </div>

        <div class="grid">
          <div>
            <label class="label">Data file</label>
            <div class="muted">garden_master_full.json</div>
          </div>
          <div>
            <label class="label">Data status</label>
            <div id="data-status" class="muted">Loading…</div>
          </div>
          <div>
            <label class="label">Persistence</label>
            <div class="muted">Completion status is stored on this device (localStorage).</div>
          </div>
          <div>
            <label class="label">Frost assumptions (from JSON)</label>
            <div id="frost" class="muted">Loading…</div>
          </div>
          <div>
            <label class="label">Reset</label>
            <button id="btn-reset" class="btn danger">Clear all completion data</button>
            <div class="help">This only clears your local completion history and notes. It does not modify the JSON file.</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <h2>Install</h2>
        </div>
        <div class="muted">
          On Android Chrome: open this site, then tap <strong>⋮</strong> → <strong>Add to Home screen</strong>.
          The app will work offline after the first load.
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="muted">Tip: this is a PWA. Host these files (GitHub Pages is easiest) and install it to your home screen.</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
